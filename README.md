# SDE Second Assignment Delivery - Client
#### Gabriele Scarton
###### gabriele.scarton@studenti.unitn.it
This is the second assignment for IntroSDE course at Unitn.
The goal of the assignment is to create a rest service composed by a server and a test client.
I worked alone, the server is deployed on Heroku at **sde2-2017-scarton.herokuapp.com** and available [here](https://github.com/Gabry147/introsde-2017-assignment-2-server).
## Specifications
  - Dependency manager: Ivy
  - Build tool: Ant
  - Rest framework for making request: Jersey

##  The code structure
The client is composed by its _build.xml_ file, the _ivy.xml_ dependencies file and the source code. In the repository there are also the two log file created executing the client.
The _it.gabry147_ folder contains two packages:
  - **entities** contains all the entities used. It's strongly based on server enitites package.
  - **client** contains the Jersey-related code to make HTTP requests and some utilities to print the output.

## The code logic
- **entities** package is quite similar to the server counterpart, removed the persistency annotations and the database-related functions.
- **client** package has three classes: 
  - The Print class contains all the methods for printing the data. Using Object as class for all entities, a single private XML marshaller and a single private JSON marshaller are implemented. These marshaller functions are called from every specified function for each different entities, which also set the right context for JAXB and calls the right function based on the content-type passed as parameters. The last method prints the result of the request based on the status string and the HTTP status code.
  - The Sender class contains all the methods to send HTTP request. There are basic private functions for each HTTP method and a method for every assignment request, which work both with JSON and XML, it depends on the content-type passed. Sender class also contains all the references (ids, types) for making requests and a reference for the log file.
  - The ClientMain class is the main class of the project. It contains only one method (main excluded), which takes a content-type as parameters and it sequentially executes all the assignment request (using an instance of the Sender class) and for each one it prints the output. The main function set the log file in the Sender instance and run the unique class method for JSON data-type. When the method has finished the execution, the main function resets all the Sender data and set a new log file, then re-run al the requests for XML data-type. 
## How to run the code
The client is packed into a .jar file, automatically generated by Ant with the console command:
``` 
$ ant compile
```
In order to execute it, the following command automatically generates the .jar file and it executes it:
``` 
$ ant execute.client 
```
